<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DC js - TD 1</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/dc/4.2.7/style/dc.min.css" rel="stylesheet"/>
    <link crossorigin="" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" rel="stylesheet"/>
    <link href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" rel="stylesheet"/>
    <link href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" rel="stylesheet"/>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/4.2.7/dc.min.js"></script>
    <script src="https://momentjs.com/downloads/moment.js"></script>
    <script crossorigin="" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <script src="/dc.leaflet.js"></script>
    <script src="/viz.js"></script>

    <style>

        body {
            margin: 0.5rem;
            width: calc(-1rem + 100vw);
            height: calc(-1rem + 100vh);
        }

        .topContainer {
            display: grid;
            grid-gap: 0.5rem;

            height: 100%;

            grid-template-columns: repeat(5, minmax(0, 1fr));
        }

        .container {
            padding: 0.5rem;
            height: calc(-1rem + 25vh);
        }

        .dc-chart g.row text, .dc-chart .pie-slice {
            fill: #000;
        }

        #attentionDesMediasChartAnchor {
            grid-column-start: 4;
            grid-column-end: 5;
            grid-row-start: 1;
            grid-row-end: 1;
        }

        #schoolLevelChartAnchor {
            grid-column-start: 5;
            grid-column-end: 6;
            grid-row-start: 1;
            grid-row-end: 1;
        }

        #saisonsChartAnchor {
            grid-column-start: 4;
            grid-column-end: 5;
            grid-row-start: 2;
            grid-row-end: 2;
        }

        #locationsChartAnchor {
            grid-column-start: 5;
            grid-column-end: 6;
            grid-row-start: 2;
            grid-row-end: 2;
        }

        #nbMassShootingParDateChartAnchor {
            grid-column-start: 1;
            grid-column-end: 6;
            grid-row-start: 3;
            grid-row-end: 3;
        }

        #localisationOnMapContainer {
            grid-column-start: 1;
            grid-column-end: 4;
            grid-row-start: 1;
            grid-row-end: 3;
            height: calc(-4rem + 75vh);
        }

        #localisationOnMap {
            height: calc(-4rem + 75vh);
        }
    </style>
</head>
<body>

<button onclick="reset()" style="position: absolute;top: 0;right: 0;margin: 1rem">Reset</button>

<div class="topContainer">
    <div class="container" id="attentionDesMediasChartAnchor">
        <h3>Niveau d'attention des médias</h3>
        <div id="attentionDesMediasChart"></div>
    </div>
    <div class="container" id="schoolLevelChartAnchor">
        <h3>Niveau scolaire des lieux</h3>
        <div id="schoolLevelChart"></div>
    </div>
    <div class="container" id="saisonsChartAnchor">
        <h3>Saison lors de l'événement</h3>
        <div id="saisonsChart"></div>
    </div>
    <div class="container" id="locationsChartAnchor">
        <h3>Localisation des événement</h3>
        <div id="locationsChart"></div>
    </div>
    <div class="container" id="nbMassShootingParDateChartAnchor">
        <h3>Nombre d'événements par années</h3>
        <div id="nbMassShootingParDateChart"></div>
    </div>
    <div class="container" id="localisationOnMapContainer">
        <h3>Carte des événements</h3>
        <div class="map" id='localisationOnMap'></div>
        <div id='localisationOnMapChart'></div>
    </div>
</div>

</body>
</html>

<script>

    // On crée la visualisation quand le document est chargé
    createDataViz()
</script>